{{ with partialCached "tnd-addtocal/private/GetAvailableServices" . . }}
<div x-data="{open: false}">
  <div class="relative z-0 block">
    <div @click="open = !open"class="flex mt-2 pointer xl:mt-auto hover:text-yellow items-end">
      <span>Add to Calendar</span><svg class="ml-1 fill-current addtocal-icon" xmlns="http://www.w3.org/2000/svg" height="20" width="20"><path d="M4.75 17.583q-.562 0-.948-.395-.385-.396-.385-.938V5.75q0-.542.385-.937.386-.396.948-.396h1.833V2.312h1.105v2.105h4.645V2.312h1.084v2.105h1.833q.562 0 .948.396.385.395.385.937v10.5q0 .542-.385.938-.386.395-.948.395Zm0-1.083h10.5q.083 0 .167-.083.083-.084.083-.167v-7h-11v7q0 .083.083.167.084.083.167.083ZM4.5 8.167h11V5.75q0-.083-.083-.167-.084-.083-.167-.083H4.75q-.083 0-.167.083-.083.084-.083.167Zm0 0V5.5v2.667Z"/></svg></div>
    <div class="absolute left-0 text-sm top-full" id="1" aria-haspopup="true" aria-expanded="false" tabindex="0">
      <ul class="relative z-10 bg-white border shadow rounded-xl" x-show="open" @click.outside="open = false" :aria-hidden="!open" aria-labelledby="addeventatc1">
        {{ range $index, $v := . }}
          <li class="" role="menuitem">
            <a class="py-3 px-3 {{ if $index }} border-t {{ end }} hover:bg-gray-200 flex items-center" href="{{ htmlUnescape .URL }}">
              <span class="w-4 mr-2">{{ partial (printf "tnd-addtocal/private/icons/%s.svg" .key) . }}</span><span class="inline-block mr-1">{{ .label }}</span>{{ if eq .type "online" }} <small>(online)</small>{{ end }}
            </a>
          </li>
        {{ end }}
      </ul>
    </div>
  </div>
</div>
{{ end }}